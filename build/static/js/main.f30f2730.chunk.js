(this.webpackJsonpdzbany=this.webpackJsonpdzbany||[]).push([[0],{110:function(e,t,r){},139:function(e,t){},142:function(e,t,r){},143:function(e,t,r){},145:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(8),c=r.n(o),s=r(24),i=r(23),u=r(25),l=r(15);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d={messages:[]};function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h={nickname:null};function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v={isAuthenticated:!1,errorMessage:null},E=Object(i.combineReducers)({messageReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_MESSAGE":return p({},e,{messages:[].concat(Object(u.a)(e.messages),[t.payload])});default:return e}},userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_USER":return g({},e,{nickname:t.payload});default:return e}},authReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CORRECT_CREDENTIALS":return y({},e,{isAuthenticated:!0,errorMessage:null});case"INCORRECT_CREDENTIALS":return y({},e,{isAuthenticated:!1,errorMessage:t.errorMessage});default:return e}}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var O=r(76),w=r(77),j=r(37),C=function(e){var t=e.text;return a.a.createElement("h1",null,t)},R=r(173),S=r(174),N=r(38),P=r.n(N),k=r(53),D=function(e){switch(e){case"auth/user-not-found":return{type:"INCORRECT_CREDENTIALS",payload:!1,errorMessage:"User not found"};case"auth/wrong-password":return{type:"INCORRECT_CREDENTIALS",payload:!1,errorMessage:"Incorrect password"};case"auth/too-many-requests":return{type:"INCORRECT_CREDENTIALS",payload:!1,errorMessage:"Too many attempts! Chill for a while"};case!0:return{type:"CORRECT_CREDENTIALS",payload:e,errorMessage:null};default:return{type:"INCORRECT_CREDENTIALS",payload:!1,errorMessage:"Oops! Something went wrong!"}}},I=r(36),A=r.n(I),T=(r(108),r(81)),M=r.n(T),L=(r(109),{apiKey:"AIzaSyBlNClU90Ig-mA4pQVzvxLU7g1gl2rPm5E",authDomain:"dzbany-d76f4.firebaseapp.com",databaseURL:"https://dzbany-d76f4.firebaseio.com",projectId:"dzbany-d76f4",storageBucket:"dzbany-d76f4.appspot.com",messagingSenderId:"376391984639",appId:"1:376391984639:web:ef22027b73885753fff3ca"});(function(){M.a.initializeApp(L)})();A.a.firestore(),r(110);var z=Object(s.b)((function(e){return{errorMessage:e.authReducer.errorMessage}}),{authenticateUser:function(e,t){return function(r){A.a.auth().signInWithEmailAndPassword(e,t).then((function(e){e.error||r(D(!0))})).catch((function(e){var t=e.code;r(D(t))}))}}})((function(e){var t=e.authenticateUser,r=e.errorMessage,o=Object(n.useState)(""),c=Object(j.a)(o,2),s=c[0],i=c[1],u=Object(n.useState)(""),l=Object(j.a)(u,2),m=l[0],p=l[1],d=function(e){var t=e.target,r=t.name,n=t.value;switch(r){case"email":i(n);break;case"password":p(n)}},f=function(e){m&&s&&("register"===e?function(e,t){A.a.auth().createUserWithEmailAndPassword(e,t).then((function(){console.log("User registered! Please log in.")})).catch((function(e){throw new Error("Error registering user: ".concat(e))}))}(s,m):t(s,m))};return a.a.createElement("div",{className:"login-page"},a.a.createElement("div",{className:"header-container"},a.a.createElement(C,{text:"Login Page"})),a.a.createElement("div",{className:"input-container"},a.a.createElement("span",{className:"email-container"},a.a.createElement(R.a,{style:{width:"30%"},variant:"outlined",color:"primary",placeholder:"email",name:"email",type:"email",onChange:function(e){return d(e)}})),a.a.createElement("span",{className:"password-container"},a.a.createElement(R.a,{style:{width:"30%"},variant:"outlined",color:"primary",placeholder:"password",name:"password",type:"password",onChange:function(e){return d(e)}}))),a.a.createElement("div",{className:"button-container"},a.a.createElement(S.a,{variant:"outlined",color:"primary",onClick:function(){return f("login")}},"Login"),a.a.createElement(S.a,{variant:"outlined",color:"primary",onClick:function(){return f("register")}},"Register")),r&&a.a.createElement("div",{className:"error-message"},r))})),U=r(83),_=r(27),x=r(82),W=r.n(x),B=(r(142),function(e){var t=e.body,r=e.socket,n=t.id===r.id?"own":"";return a.a.createElement("div",{className:"message-wrapper"},a.a.createElement("div",{className:"message ".concat(n)},"".concat(t.id,": ").concat(t.message)))}),q=function(e){var t=e.messages,r=e.socket;return t.map((function(e,t){return a.a.createElement(B,{body:e,id:t,socket:r})}))},F=(r(143),Object(s.b)((function(e){return{messagesFromStore:e.messageReducer.messages}}),{saveNewMessageToStore:function(e){return function(){var t=Object(k.a)(P.a.mark((function t(r){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:"NEW_MESSAGE",payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.messagesFromStore,r=e.socket,o=e.saveNewMessageToStore,c=document.querySelector("#message"),s=Object(n.useState)(""),i=Object(j.a)(s,2),u=i[0],l=i[1];Object(n.useEffect)((function(){r.on("new-message-from-server",(function(e){o(e)}))}),[r,o]),Object(n.useEffect)((function(){document.querySelector("#end-of-conversation").scrollIntoView({behavior:"smooth"})}),[t]);c&&c.focus();var m=function(e){if(e.preventDefault(),u){var t=r.id,n={message:u,id:t};o(n),r.emit("new-message-from-client",n),l("")}};return a.a.createElement("div",{className:"main-page"},a.a.createElement(C,{text:"Chat"}),a.a.createElement("div",{id:"conversation"},a.a.createElement(q,{messages:t,socket:r}),a.a.createElement("div",{className:"message-container"},a.a.createElement("div",{id:"end-of-conversation"}))),a.a.createElement("div",{className:"input-container"},a.a.createElement(R.a,{style:{width:"55%",backgroundColor:"white",borderRadius:"none",overflow:"hidden",marginTop:"-2px"},variant:"outlined",color:"primary",name:"message",id:"message",autoFocus:!0,value:u,onChange:function(e){return function(e){l(e.target.value)}(e)},placeholder:"Start typing..."}),a.a.createElement(S.a,{style:{height:"57px",marginTop:"-2px",backgroundColor:"white",borderRadius:"none"},variant:"outlined",color:"primary",name:"send",id:"send-message",onClick:function(e){return m(e)}},"Send message")))})));var G=function(e){var t=e.socket;return Object(n.useEffect)((function(){t.on("connect",(function(){console.log("User Connected")}))}),[t]),a.a.createElement(F,{socket:t})},J=W()("https://dzbany-server.herokuapp.com/"),V=Object(s.b)((function(e){return{isAuthenticated:e.authReducer.isAuthenticated}}),null)((function(e){var t=e.isAuthenticated;return a.a.createElement(U.a,null,a.a.createElement(_.c,null,t?a.a.createElement(_.a,{path:"*",component:function(){return a.a.createElement(G,{socket:J})}}):a.a.createElement(_.a,{path:"*",component:z})))})),K=Object(i.createStore)(E,Object(O.composeWithDevTools)(Object(i.applyMiddleware)(w.a)));c.a.render(a.a.createElement(s.a,{store:K},a.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},90:function(e,t,r){e.exports=r(145)}},[[90,1,2]]]);
//# sourceMappingURL=main.f30f2730.chunk.js.map